# 내서버코드.md

지금 온갖 에러가 다떠. 로그인 권한으로 이동가능하고 안되고 그런거에서 눌렀따가 됐다가 안됐다가 로그인 버튼을 두번하면 됐다가 안됐다가,,,, 로그인 기능 구현이 그렇게 어려워? 
다시 전부 체크해

밑에가 현재파일이야.

안쓰는 파일 있는지도 전부 확인해

PS C:\Users\doyul.go\Desktop\pcssimulationnew\frontend\src> tree /f
폴더 PATH의 목록입니다.
볼륨 일련 번호는 D825-EE62입니다.
C:.
│  App.css
│  App.jsx
│  index.css
│  main.jsx
│
├─assets
│      react.svg
│
├─components
│  │  AuthProvider.jsx
│  │
│  ├─cards
│  │      RequestQuoteCard.jsx
│  │
│  ├─charts
│  │      PumpChartCard.jsx
│  │
│  └─layout
│          Sidebar.jsx
│          Topbar.jsx
│
├─data
│      pumps.js
│
├─layouts
│      MainLayout.jsx
│
├─lib
│      api.js
│      apiClient.js
│      auth.js
│      AuthContext.jsx
│      formatters.js
│      pixel.js
│
├─pages
│  │  NotFound.jsx
│  │  simulationcategory.jsx
│  │
│  ├─admin
│  │      AdminUsersPage.jsx
│  │
│  ├─Auth
│  │      LoginPage.jsx
│  │      RegisterPage.jsx
│  │
│  ├─board
│  │      BoardList.jsx
│  │      PostEditor.jsx
│  │      PostView.jsx
│  │
│  ├─Dashboard
│  │      DashboardPage.jsx
│  │
│  ├─me
│  │      Mepage.jsx
│  │
│  ├─Profile
│  │      MePage.jsx
│  │
│  ├─Requests
│  │      AdminRequests.jsx
│  │      RequestDetail.jsx
│  │      RequestForm.jsx
│  │      RequestList.jsx
│  │      RequestNew.jsx
│  │      RequestrView.jsx
│  │
│  ├─Settings
│  │      MyInfoPage.jsx
│  │      SettingsPage.jsx
│  │
│  └─simulations
│          PumpSimulator.jsx
│          PumpSimulatorV2.jsx
│          VacuumSimulationManual.jsx
│
├─routes
│      pathNames.js
│      ProtectedRoute.jsx
│      routes.jsx
│
└─styles
        index.css

//src/routes/routes.jsx
import React from "react";
import { Routes, Route, Navigate } from "react-router-dom";
import { PATHS } from "./pathNames";
import MainLayout from "../layouts/MainLayout.jsx";
import ProtectedRoute from "./ProtectedRoute.jsx";
import { useAuth } from "../lib/AuthContext.jsx";

// Pages
import DashboardPage from "../pages/Dashboard/DashboardPage.jsx";
import PumpSimulator from "../pages/simulations/PumpSimulator.jsx";
import PumpSimulatorV2 from "../pages/simulations/PumpSimulatorV2.jsx";
import VacuumSimulationManual from "../pages/simulations/VacuumSimulationManual.jsx";

import SettingsPage from "../pages/Settings/SettingsPage.jsx";
import MyInfoPage from "../pages/Settings/MyInfoPage.jsx";
import RequestForm from "../pages/Requests/RequestForm.jsx";
import RequestList from "../pages/Requests/RequestList.jsx";
import RequestDetail from "../pages/Requests/RequestDetail.jsx";
import AdminRequests from "../pages/Requests/AdminRequests.jsx";
import AdminUsersPage from "../pages/admin/AdminUsersPage.jsx";

import SimulationCategoryPage from "../pages/simulationcategory.jsx";
import LoginPage from "../pages/Auth/LoginPage.jsx";
import RegisterPage from "../pages/Auth/RegisterPage.jsx";
import MePage from "../pages/Profile/MePage.jsx";

import BoardList from "../pages/board/BoardList.jsx";
import PostEditor from "../pages/board/PostEditor.jsx";
import PostView from "../pages/board/PostView.jsx";
import NotFound from "../pages/NotFound.jsx";

// 루트 분기: 로그인 여부와 무관하게 대시보드로 유도(대시보드는 공개 페이지)
function RootRedirect() {
  const { hydrated } = useAuth();
  if (!hydrated) return null;
  return <Navigate to={PATHS.DASHBOARD} replace />;
}

export default function AppRoutes() {
  return (
    <Routes>
      <Route path={PATHS.ROOT} element={<RootRedirect />} />

      <Route element={<MainLayout />}>
        {/* 공개 */}
        <Route path={PATHS.AUTH_LOGIN} element={<LoginPage />} />
        <Route path={PATHS.AUTH_REGISTER} element={<RegisterPage />} />
        <Route path={PATHS.DASHBOARD} element={<DashboardPage />} />           {/* ⬅ 공개로 이동 */}
        <Route path={PATHS.SIMULATIONS} element={<PumpSimulator />} />         {/* ⬅ 공개로 이동 */}
        <Route path={PATHS.SIMULATIONS_PUMP_V2} element={<PumpSimulatorV2 />} /> {/* ⬅ 공개로 이동 */}
        <Route path={PATHS.BOARD_LIST} element={<BoardList />} />
        <Route path={PATHS.BOARD_VIEW()} element={<PostView />} />
        <Route path={PATHS.SIMULATION_CATEGORY} element={<SimulationCategoryPage />} />
        <Route path={PATHS.PUMPS} element={<VacuumSimulationManual />} />

        {/* 보호 */}
        <Route element={<ProtectedRoute />}>
          

          <Route path={PATHS.BOARD_NEW} element={<PostEditor />} />
          <Route path={PATHS.BOARD_EDIT()} element={<PostEditor />} />

          <Route path={PATHS.SETTINGS} element={<SettingsPage />} />
          <Route path={PATHS.MY_PAGE} element={<MyInfoPage />} />
          <Route path={PATHS.ME} element={<MePage />} />

          <Route path={PATHS.REQUEST_NEW} element={<RequestForm />} />
          <Route path={PATHS.REQUESTS} element={<RequestList />} />
          <Route path={PATHS.REQUEST_VIEW()} element={<RequestDetail />} />

          <Route path={PATHS.REQUESTS_ADMIN} element={<AdminRequests />} />
          <Route path={PATHS.ADMIN_USERS} element={<AdminUsersPage />} />
        </Route>

        <Route path={PATHS.NOT_FOUND} element={<NotFound />} />
      </Route>
    </Routes>
  );
}


//src/routes/pathNames.js
export const PATHS = {
  ROOT: "/",
  AUTH_LOGIN: "/auth/login",
  AUTH_REGISTER: "/auth/register",

  DASHBOARD: "/dashboard",

  SIMULATION_CATEGORY: "/simulate",
  SIMULATIONS: "/simulate/pump",
  SIMULATIONS_PUMP_V2: "/simulate/pump/v2",
  PUMPS: "/simulate/manual",

  BOARD_LIST: "/board",
  BOARD_NEW: "/board/new",
  BOARD_VIEW: (id = ":id") => `/board/${id}`,
  BOARD_EDIT: (id = ":id") => `/board/${id}/edit`,

  REQUEST_NEW: "/requests/new",
  REQUESTS: "/requests",
  REQUEST_VIEW: (id = ":id") => `/requests/${id}`,
  REQUESTS_ADMIN: "/admin/requests",

  ADMIN_USERS: "/admin/users",

  SETTINGS: "/settings",
  MY_PAGE: "/settings/me",
  ME: "/me",

  NOT_FOUND: "*",
};



//src/routes/ProtectedRoute.jsx
import React from "react";
import { Navigate, Outlet, useLocation } from "react-router-dom";
import { useAuth } from "../lib/AuthContext.jsx";
import { PATHS } from "./pathNames";

export default function ProtectedRoute() {
  const { user, hydrated } = useAuth();
  const loc = useLocation();

  if (!hydrated) {
    return (
      <div className="min-h-[40vh] flex items-center justify-center text-slate-500">
        로딩 중...
      </div>
    );
  }
  if (!user) return <Navigate to={PATHS.AUTH_LOGIN} state={{ from: loc }} replace />;
  return <Outlet />;
}


// src/components/AuthProvider.jsx
import React from "react";
import { AuthProvider as Provider } from "../lib/AuthContext.jsx";

export default function AuthProvider({ children }) {
  return <Provider>{children}</Provider>;
}
//src/lib/api.js
const API = import.meta.env.VITE_API_URL || "";

export async function getMe(token) {
  const res = await fetch(`${API}/api/me`, {
    headers: { Authorization: `Bearer ${token}` },
  });
  if (!res.ok) throw new Error("me fetch failed");
  return res.json();
}

export async function updateMe(body, token) {
  const res = await fetch(`${API}/api/me`, {
    method: "PUT",
    headers: {
      "Content-Type": "application/json",
      Authorization: `Bearer ${token}`,
    },
    body: JSON.stringify(body),
  });
  if (!res.ok) throw new Error("me update failed");
  return res.json();
}



//src/lib/apiClient.js
// 공용 fetch 래퍼: 기존 코드 보존 + Bearer 주입 보강 (auth_tokens 또는 accessToken 모두 지원)

export const getAccessToken = () => {
  // 1) 신(新版) 저장 키: "auth_tokens" JSON → access_token
  try {
    const raw = localStorage.getItem("auth_tokens");
    if (raw) {
      const parsed = JSON.parse(raw);
      if (parsed && typeof parsed === "object" && parsed.access_token) {
        return String(parsed.access_token);
      }
    }
  } catch {
    // JSON 파싱 실패 시 무시하고 구(舊) 키로 폴백
  }

  // 2) 구(舊) 저장 키: "accessToken" (이전 코드 호환)
  try {
    return localStorage.getItem("accessToken") || "";
  } catch {
    return "";
  }
};

export async function apiFetch(url, options = {}) {
  // Authorization: Bearer 주입 (auth_tokens/accessToken 둘 다 커버)
  const token = getAccessToken();
  const headers = new Headers(options.headers || {});
  if (token) headers.set("Authorization", `Bearer ${token}`);
  if (!headers.has("Content-Type") && options.body) headers.set("Content-Type", "application/json");

  const res = await fetch(url, { ...options, headers });

  // 필요 시 401 처리 훅(원하면 refresh 로직 삽입 가능)
  if (res.status === 401) {
    // 여기에 refresh 시도/로그아웃 처리 등 선택 삽입 가능
  }
  return res;
}

// ======= 여기부터 추가 =======
// 기존 named export를 그대로 묶어서 default로도 노출
const apiClient = {
  apiFetch,        // fetch 래퍼
  getAccessToken,  // 토큰 리더
};

// 기본 내보내기(default) 추가 → 기존 `import apiClient from ".../apiClient.js"` 호환
export default apiClient;


// src/lib/auth.js

export const readTokens = () => {
  try {
    const raw = localStorage.getItem("auth_tokens");
    return raw ? JSON.parse(raw) : null;
  } catch {
    return null;
  }
};

export const writeTokens = (tokens) => {
  localStorage.setItem("auth_tokens", JSON.stringify(tokens));
};

export const clearTokens = () => {
  localStorage.removeItem("auth_tokens");
};



//src/lib/AuthContext.jsx
// 전역 인증 컨텍스트: 기존 로직 유지 + URL 결합 안전화 + email 소문자 통일 반영(로그인/가입)

import React, { createContext, useContext, useEffect, useMemo, useState, useCallback } from "react";

const AuthCtx = createContext(null);

export function AuthProvider({ children }) {
  const [tokens, setTokens] = useState(() => {
    try {
      const raw = localStorage.getItem("auth_tokens");
      return raw ? JSON.parse(raw) : null;
    } catch { return null; }
  });
  const [user, setUser] = useState(null);
  const [hydrated, setHydrated] = useState(false);

  const saveTokens = useCallback((next) => {
    setTokens(next);
    if (next) localStorage.setItem("auth_tokens", JSON.stringify(next));
    else localStorage.removeItem("auth_tokens");
  }, []);

  // base + path를 안전하게 이어붙이는 유틸 (이중 슬래시 방지)
  const joinUrl = useCallback((base, path) => {
    if (!base) return path;
    const b = base.endsWith("/") ? base.slice(0, -1) : base;
    const p = path.startsWith("/") ? path : `/${path}`;
    return b + p;
  }, []);

  // API 헬퍼 (기존 req 유지, URL 결합만 안전화)
  const api = useMemo(() => {
    const base = import.meta.env.VITE_API_BASE || "";
    const req = async (path, opts = {}) => {
      const headers = new Headers(opts.headers || {});
      headers.set("Content-Type", "application/json");
      if (tokens?.access_token) headers.set("Authorization", `Bearer ${tokens.access_token}`);
      const url = joinUrl(base, path);
      const res = await fetch(url, { ...opts, headers });
      if (!res.ok) {
        const detail = await res.json().catch(() => ({}));
        const msg = detail?.detail || res.statusText;
        throw new Error(msg);
      }
      return res.json();
    };
    return { req };
  }, [tokens, joinUrl]);

  // 토큰 있으면 me 호출 (기존 유지)
  useEffect(() => {
    (async () => {
      try {
        if (tokens?.access_token) {
          const me = await api.req("/api/auth/me");
          setUser(me);
        } else {
          setUser(null);
        }
      } catch {
        // 토큰 무효 → 로그아웃 처리
        saveTokens(null);
        setUser(null);
      } finally {
        setHydrated(true);
      }
    })();
  }, [tokens, api, saveTokens]);

  // 로그인(id, password) → email: id.trim().toLowerCase() 로 통일
  const login = useCallback(async ({ id, password }) => {
    const email = String(id || "").trim().toLowerCase();
    const data = await api.req("/api/auth/login", {
      method: "POST",
      body: JSON.stringify({ email, password }), // ✅ 백엔드 email 필드 사용
    });
    saveTokens(data);
    const me = await api.req("/api/auth/me");
    setUser(me);
    return me;
  }, [api, saveTokens]);

  // 회원가입: email도 소문자 통일(로그인 규칙과 일치)
  const register = useCallback(async ({ id, name, department, knox_email, password }) => {
    const email = String(id || "").trim().toLowerCase();
    const data = await api.req("/api/auth/register", {
      method: "POST",
      body: JSON.stringify({
        email,             // ✅ 이메일 형식 강제 없음, 단 로그인과 일관 유지 위해 lower
        name,
        password,
        password_confirm: password,
        department,
        knox_email,
      }),
    });
    saveTokens(data);
    const me = await api.req("/api/auth/me");
    setUser(me);
    return me;
  }, [api, saveTokens]);

  const signOut = useCallback(() => {
    saveTokens(null);
    setUser(null);
  }, [saveTokens]);

  const value = useMemo(() => ({
    user, hydrated, tokens,
    login, register, signOut
  }), [user, hydrated, tokens, login, register, signOut]);

  return <AuthCtx.Provider value={value}>{children}</AuthCtx.Provider>;
}

export function useAuth() {
  const ctx = useContext(AuthCtx);
  if (!ctx) throw new Error("useAuth must be used within AuthProvider");
  return ctx;
}


// src/lib/formatters.js
export const fmt = {
  number(n, digits = 0) {
    if (n === null || n === undefined || isNaN(n)) return "-";
    return Number(n).toLocaleString(undefined, {
      minimumFractionDigits: digits,
      maximumFractionDigits: digits,
    });
  },
};


// src/lib/pixel.js
export function fireVisitPixelOnce(pageTag = "") {
  try {
    const key = `visit_pixel_${pageTag || "default"}`;
    if (sessionStorage.getItem(key)) return;
    const img = new Image();
    img.referrerPolicy = "no-referrer-when-downgrade";
    img.src = `/visit.gif?page=${encodeURIComponent(pageTag)}&ts=${Date.now()}`;
    sessionStorage.setItem(key, "1");
  } catch {}
}

// src/pages/board/BoardList.jsx
import React, { useEffect, useState } from "react";
import { Link } from "react-router-dom";
import { PATHS } from "../../routes/pathNames";
import apiClient from "../../lib/apiClient";

export default function BoardList() {
  const [rows, setRows] = useState([]);
  const [q, setQ] = useState("");

  useEffect(() => {
    apiClient
      .get("/board/posts", { params: { offset: 0, limit: 50, q: q || undefined } })
      .then((res) => setRows(Array.isArray(res.data) ? res.data : []))
      .catch(() => setRows([]));
  }, [q]);

  return (
    <div className="p-6 space-y-4">
      <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
        <h1 className="text-xl font-bold">Simulation 기술 칼럼</h1>
        <div className="flex gap-2">
          <input
            className="border rounded px-3 py-2"
            placeholder="검색어"
            value={q}
            onChange={(e) => setQ(e.target.value)}
          />
          <Link className="px-3 py-2 rounded bg-slate-800 text-white" to={PATHS.BOARD_NEW}>
            새 글
          </Link>
        </div>
      </div>

      <ul className="space-y-2">
        {rows.map((row) => (
          <li key={row.id} className="border rounded p-3 hover:bg-slate-50">
            <Link to={PATHS.BOARD_VIEW(row.id)} className="font-semibold">
              {row.title}
            </Link>
            <div className="text-sm text-slate-500">
              {(row.author_name || "익명")} · {row.created_at ? new Date(row.created_at).toLocaleString() : "-"}
            </div>
          </li>
        ))}
        {!rows.length && <li className="text-slate-500 text-sm">게시물이 없습니다.</li>}
      </ul>
    </div>
  );
}

//src/pages/me/MePage.jsx
import { useEffect, useState } from "react";
import { getMe, updateMe } from "@/lib/api";
import { useAuth } from "@/lib/AuthContext";

export default function MePage() {
  const { token } = useAuth();
  const [form, setForm] = useState({
    email: "",
    name: "",
    role: "",
    department: "",
    knox_email: "",
  });
  const [loading, setLoading] = useState(true);
  const [saving, setSaving] = useState(false);

  useEffect(() => {
    (async () => {
      setLoading(true);
      const me = await getMe(token);
      setForm({
        email: me.email ?? "",
        name: me.name ?? "",
        role: me.role ?? "",
        department: me.department ?? "",
        knox_email: me.knox_email ?? "",
      });
      setLoading(false);
    })();
  }, [token]);

  const onChange = (e) => setForm((p) => ({ ...p, [e.target.name]: e.target.value }));

  const onSubmit = async (e) => {
    e.preventDefault();
    setSaving(true);
    const updated = await updateMe(
      {
        name: form.name,
        department: form.department || null,
        knox_email: form.knox_email || null,
      },
      token
    );
    setForm((p) => ({ ...p, ...updated }));
    setSaving(false);
    alert("저장되었습니다.");
  };

  if (loading) {
    return <div className="mx-auto max-w-3xl p-6">불러오는 중…</div>;
  }

  return (
    <div className="mx-auto max-w-3xl p-6">
      <div className="mb-6">
        <h1 className="text-xl font-bold">내 정보</h1>
        <p className="text-sm text-gray-500">계정 프로필과 부서 정보를 관리합니다.</p>
      </div>

      <form onSubmit={onSubmit} className="space-y-6">
        <div className="rounded-2xl border bg-white p-5 shadow-sm">
          <div className="grid gap-4 md:grid-cols-2">
            <div>
              <label className="mb-1 block text-xs font-medium text-gray-500">이메일</label>
              <input
                type="email"
                className="w-full rounded-lg border px-3 py-2 text-sm"
                value={form.email}
                disabled
              />
            </div>
            <div>
              <label className="mb-1 block text-xs font-medium text-gray-500">역할</label>
              <input
                type="text"
                className="w-full rounded-lg border px-3 py-2 text-sm"
                value={form.role}
                disabled
              />
            </div>
            <div className="md:col-span-2">
              <label className="mb-1 block text-xs font-medium text-gray-500">이름</label>
              <input
                name="name"
                className="w-full rounded-lg border px-3 py-2 text-sm"
                value={form.name}
                onChange={onChange}
                placeholder="홍길동"
              />
            </div>
            <div>
              <label className="mb-1 block text-xs font-medium text-gray-500">부서</label>
              <input
                name="department"
                className="w-full rounded-lg border px-3 py-2 text-sm"
                value={form.department}
                onChange={onChange}
                placeholder="Device Solution / Vacuum"
              />
            </div>
            <div>
              <label className="mb-1 block text-xs font-medium text-gray-500">Knox 메일</label>
              <input
                name="knox_email"
                className="w-full rounded-lg border px-3 py-2 text-sm"
                value={form.knox_email}
                onChange={onChange}
                placeholder="your.name@samsung.com"
              />
            </div>
          </div>

          <div className="mt-5 flex justify-end">
            <button
              type="submit"
              disabled={saving}
              className="rounded-xl bg-gray-900 px-4 py-2 text-sm font-semibold text-white hover:bg-black disabled:opacity-50"
            >
              {saving ? "저장 중…" : "저장"}
            </button>
          </div>
        </div>
      </form>
    </div>
  );
}

//src/pages/profile/MePage.jsx
import React, { useEffect, useState } from "react";
import { useAuth } from "../../lib/AuthContext";

export default function MePage() {
  const { accessToken } = useAuth();
  const [me, setMe] = useState(null);
  const [form, setForm] = useState({ name: "", department: "", knox_email: "" });
  const [saving, setSaving] = useState(false);
  const [msg, setMsg] = useState("");

  useEffect(() => {
    (async () => {
      const res = await fetch("/api/me", { headers: { Authorization: `Bearer ${accessToken}` } });
      if (!res.ok) { setMsg("내 정보 불러오기 실패"); return; }
      const data = await res.json();
      setMe(data);
      setForm({ name: data.name || "", department: data.department || "", knox_email: data.knox_email || "" });
    })();
  }, [accessToken]);

  async function onSave(e) {
    e.preventDefault();
    setSaving(true);
    setMsg("");
    const res = await fetch("/api/me", {
      method: "PUT",
      headers: { "Content-Type": "application/json", Authorization: `Bearer ${accessToken}` },
      body: JSON.stringify(form),
    });
    setSaving(false);
    if (!res.ok) { setMsg("수정 실패"); return; }
    const data = await res.json();
    setMe(data);
    setMsg("저장 완료");
  }

  if (!me) return <div className="p-6">로딩...</div>;

  return (
    <div className="max-w-3xl mx-auto p-6">
      <h1 className="text-2xl font-bold mb-4">내 정보</h1>
      <div className="bg-white rounded-2xl shadow p-6 ring-1 ring-gray-100">
        <div className="mb-4 text-sm text-gray-600">
          <div><b>Email</b> : {me.email}</div>
          <div><b>Role</b> : {me.role}</div>
        </div>
        <form onSubmit={onSave} className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label className="block text-sm font-medium mb-1">이름</label>
            <input className="w-full border rounded-xl px-3 py-2" value={form.name}
              onChange={e=>setForm(f=>({...f, name:e.target.value}))}/>
          </div>
          <div>
            <label className="block text-sm font-medium mb-1">부서</label>
            <input className="w-full border rounded-xl px-3 py-2" value={form.department}
              onChange={e=>setForm(f=>({...f, department:e.target.value}))}/>
          </div>
          <div className="md:col-span-2">
            <label className="block text-sm font-medium mb-1">녹스 메일</label>
            <input className="w-full border rounded-xl px-3 py-2" value={form.knox_email}
              onChange={e=>setForm(f=>({...f, knox_email:e.target.value}))}/>
          </div>
          {msg && <div className="md:col-span-2 text-sm text-emerald-700">{msg}</div>}
          <div className="md:col-span-2">
            <button disabled={saving} className="w-full bg-black text-white rounded-xl py-3 font-semibold">
              {saving ? "저장중..." : "저장"}
            </button>
          </div>
        </form>
      </div>
    </div>
  );
}


// //src/pages/Settings/MyInfoPage.jsx
import React, { useEffect, useState } from "react";
import { useAuth } from "../../lib/AuthContext.jsx";

export default function MyInfoPage() {
  const { token } = useAuth();
  const [data, setData] = useState(null);
  const [form, setForm] = useState({ name: "", department: "", knox_email: "" });
  const [saving, setSaving] = useState(false);

  useEffect(() => {
    fetch("/api/me", { headers: { Authorization: `Bearer ${token}` } })
      .then((r) => r.json())
      .then((d) => {
        setData(d);
        setForm({ name: d.name || "", department: d.department || "", knox_email: d.knox_email || "" });
      });
  }, [token]);

  const onSave = async () => {
    setSaving(true);
    const r = await fetch("/api/me", {
      method: "PUT",
      headers: { "Content-Type": "application/json", Authorization: `Bearer ${token}` },
      body: JSON.stringify(form),
    });
    const d = await r.json();
    setData(d);
    setSaving(false);
  };

  if (!data) return <div className="p-6 text-slate-500">로딩...</div>;
  return (
    <div className="p-6 max-w-2xl">
      <h2 className="text-2xl font-semibold mb-4">내 정보</h2>
      <div className="grid gap-3">
        <div>
          <div className="text-sm text-slate-500">이메일</div>
          <div className="font-mono">{data.email}</div>
        </div>
        <div>
          <label className="text-sm text-slate-500">이름</label>
          <input className="mt-1 w-full rounded border p-2" value={form.name}
                 onChange={(e)=>setForm({...form, name:e.target.value})}/>
        </div>
        <div>
          <label className="text-sm text-slate-500">부서</label>
          <input className="mt-1 w-full rounded border p-2" value={form.department}
                 onChange={(e)=>setForm({...form, department:e.target.value})}/>
        </div>
        <div>
          <label className="text-sm text-slate-500">Knox 이메일</label>
          <input className="mt-1 w-full rounded border p-2" value={form.knox_email}
                 onChange={(e)=>setForm({...form, knox_email:e.target.value})}/>
        </div>

        <div className="flex gap-2">
          <span className="px-2 py-1 rounded bg-slate-100 text-slate-700 text-sm">역할: {data.role}</span>
        </div>

        <button onClick={onSave} disabled={saving}
                className="mt-2 px-4 py-2 rounded bg-black text-white disabled:opacity-50">
          {saving ? "저장 중..." : "저장"}
        </button>
      </div>
    </div>
  );
}

// src/pages/Settings/SettingsPage.jsx
import React from "react";

export default function SettingsPage() {
  return (
    <div className="space-y-6">
      <h2 className="text-2xl font-bold">⚙️ Settings</h2>
      <div className="rounded-xl border border-white/10 p-4 bg-neutral-900">
        <p className="text-sm text-white/70">
          환경설정 페이지입니다. 테마, 단위, 사용자 설정 등을 배치하세요.
        </p>
      </div>
    </div>
  );
}
